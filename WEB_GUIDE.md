# BakR Web界面使用指南

## 🚀 快速开始

### 启动应用
```bash
# 方法1：使用启动脚本
python run_web.py

# 方法2：直接运行streamlit
streamlit run src/web/streamlit_app.py

# 方法3：使用批处理文件（Windows）
start_web.bat
```

应用启动后会自动在浏览器中打开，默认地址：http://localhost:8501

## 🎯 主要功能

### 1. 文件选择方式

#### 🖱️ 拖拽文件（推荐）
1. 从文件资源管理器拖拽文件到蓝色"拖拽文件到此处"区域
2. 系统会识别文件名和大小
3. 在下方输入框中确认或修正完整文件路径

#### 📝 手动输入路径
- 直接在"文件路径"输入框中输入或粘贴完整路径
- 支持Windows路径格式：`C:\Users\...\file.txt`

#### 📂 文件浏览器
1. 选择常用目录（桌面、文档、下载等）
2. 点击"📂 浏览目录"按钮
3. 在系统文件选择器中选择文件

#### 📋 历史记录
- 应用会记住最近处理的20个文件
- 在"最近使用的文件"下拉菜单中快速选择

### 2. 备份文件搜索

#### 🔍 自动扫描
1. 选择文件后，点击"🔍 扫描备份"按钮
2. 系统会自动在以下位置查找备份：
   - 同级目录下的 `.bak`、`.backup`、`.old` 文件
   - 上级目录的备份文件夹
   - 相似名称的备份文件

#### 📊 结果显示
- 显示找到的备份文件列表
- 包含文件大小、修改时间、相似度等信息
- 可视化图表显示备份文件统计

### 3. 文件恢复

#### 🎯 选择备份
1. 在备份文件表格中选择要恢复的备份
2. 查看备份文件详情确认
3. 系统会显示即将执行的操作

#### 🔄 执行恢复
1. 点击"🔄 确认恢复"按钮
2. 系统会自动：
   - 将原文件备份为 `.new`
   - 从备份文件恢复内容
   - 显示操作结果

### 4. 批量处理

#### 📦 批量文件输入
1. 在"批量文件路径"文本区域中：
   - 拖拽多个文件
   - 或每行输入一个文件路径
2. 点击"🔍 批量扫描"
3. 系统会为每个文件查找备份

## 🎨 界面说明

### 左侧面板 - 工具面板
- **文件选择区域**：拖拽和路径输入
- **快速操作按钮**：扫描、清除
- **批量处理**：多文件同时处理
- **设置选项**：扫描参数配置

### 主内容区域
- **当前文件信息**：显示选中文件的详细信息
- **备份文件列表**：找到的备份文件表格
- **统计图表**：可视化分析
- **操作日志**：所有操作的历史记录

## 💡 使用技巧

### 拖拽优化
- **单文件**：直接拖拽到蓝色区域，最简单快捷
- **多文件**：拖拽到"批量文件路径"区域
- **路径确认**：拖拽后请确认路径是否正确完整

### 路径输入技巧
- 支持复制粘贴完整路径
- 支持相对路径和绝对路径
- 路径中的反斜杠会自动处理

### 备份文件匹配
- 系统会查找以下格式的备份：
  - `文件名.bak`
  - `文件名.backup`
  - `文件名.old`
  - `文件名_backup.扩展名`
  - `文件名.yyyy-mm-dd.扩展名`

## ⚠️ 注意事项

### 安全提醒
- **恢复前备份**：原文件会自动备份为 `.new`
- **路径验证**：请确保输入的路径正确
- **权限检查**：确保对文件有读写权限

### 浏览器兼容性
- 推荐使用现代浏览器（Chrome、Firefox、Edge）
- 拖拽功能需要浏览器支持HTML5

### 文件大小
- Web界面对拖拽文件大小无限制
- 只获取文件路径，不上传文件内容

## 🔧 故障排除

### 拖拽不工作
1. 检查浏览器是否支持HTML5拖拽
2. 尝试刷新页面
3. 使用手动输入路径作为替代方案

### 路径识别问题
1. 确保输入完整的文件路径
2. 检查文件是否存在
3. 验证文件访问权限

### 备份文件找不到
1. 检查文件名和扩展名
2. 确认备份文件确实存在
3. 尝试手动指定备份文件路径

## 📞 获取帮助

如果遇到问题：
1. 查看操作日志获取详细错误信息
2. 检查文件路径和权限
3. 尝试重启应用
4. 提交Issue到项目仓库
